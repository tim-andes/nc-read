# Script to read NASA Data .nc files

![Screenshot of command line output](https://github.com/user-attachments/assets/47522d91-83e0-4386-880c-5f77cc301288)

## Steps
1. `pip install -r requirements.txt`
2. `python nc-read`
3. Pass path to .nc file
4. Select desired output

## Interpretation Guidance
## üõ∞Ô∏è PACE/OCI Data Products for Urban Air Quality (Health Assessment)

The most relevant data products for assessing healthy/unhealthy areas in an urban environment are those related to **aerosols**, as these particles are direct indicators of air pollution and its impact on public health.

***

### 1. Aerosol Optical Properties (AER)

These products provide a comprehensive set of parameters to characterize the airborne particles, which is vital for distinguishing pollution types (e.g., smoke vs. dust) and their potential toxicity.

| Product Name | Short Name | Data Level | Real-time (NRT) Status |
| :--- | :--- | :--- | :--- |
| **Global Mapped Aerosol Optical Properties, UAA** | `PACE_OCI_L3M_AER_UAA` | L3M (Mapped) | Standard |
| **Global Mapped Aerosol Optical Properties, UAA (NRT)** | `PACE_OCI_L3M_AER_UAA_NRT` | L3M (Mapped) | Near Real-time |
| **Regional Aerosol Optical Properties, UAA** | `PACE_OCI_L2_AER_UAA` | L2 (Regional) | Standard |
| **Regional Aerosol Optical Properties, UAA (NRT)** | `PACE_OCI_L2_AER_UAA_NRT` | L2 (Regional) | Near Real-time |

***

### 2. Aerosol Optical Thickness (AOT)

AOT is the fundamental measurement for aerosol loading. High AOT values are a direct proxy for high concentrations of Particulate Matter ($\text{PM}_{2.5}$ and $\text{PM}_{10}$) and thus, poor air quality.

| Product Name | Short Name | Data Level | Real-time (NRT) Status |
| :--- | :--- | :--- | :--- |
| **Global Mapped Aerosol Optical Thickness** | `PACE_OCI_L3M_AOT` | L3M (Mapped) | Standard |
| **Global Mapped Aerosol Optical Thickness (NRT)** | `PACE_OCI_L3M_AOT_NRT` | L3M (Mapped) | Near Real-time |
| **Global Binned Aerosol Optical Thickness** | `PACE_OCI_L3B_AOT` | L3B (Binned) | Standard |
| **Global Binned Aerosol Optical Thickness (NRT)** | `PACE_OCI_L3B_AOT_NRT` | L3B (Binned) | Near Real-time |

***

### 3. Aerosol Index (UVAI)

The Near-UV Aerosol Index helps to detect the presence of strongly absorbing aerosols (like smoke, black carbon, and dust) that are lofted high in the atmosphere, aiding in tracking pollution sources and transport.

| Product Name | Short Name | Data Level | Real-time (NRT) Status |
| :--- | :--- | :--- | :--- |
| **Global Mapped Aerosol Index, UAA** | `PACE_OCI_L3M_UVAI_UAA` | L3M (Mapped) | Standard |
| **Global Mapped Aerosol Index, UAA (NRT)** | `PACE_OCI_L3M_UVAI_UAA_NRT` | L3M (Mapped) | Near Real-time |
| **Regional Aerosol Index, UAA** | `PACE_OCI_L2_UVAI_UAA` | L2 (Regional) | Standard |
| **Regional Aerosol Index, UAA (NRT)** | `PACE_OCI_L2_UVAI_UAA_NRT` | L2 (Regional) | Near Real-time |

## nc_to_geojson.py
This script takes .nc files and outputs to a leaflet friendly GEOJson file.

### Key Components for Leaflet Mapping üó∫Ô∏è
The GeoJSON output contains all the attributes necessary for an overlay on a Leaflet map.

1. Data Variables (lat, lon, aerosol levels)
In the GeoJSON, these are structured as follows:

lon & lat: Stored in the standard Leaflet/GeoJSON coordinate format: geometry.coordinates: [longitude, latitude].

aerosol levels: Stored under the properties object as "aod" (Aerosol Optical Depth). This is the value you will use to determine the color, size, or intensity of your map markers.

```JSON

{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [-122.3, 47.6]  // [lon, lat] for a point near Seattle
  },
  "properties": {
    "aod": 0.15, // The aerosol level
    "lat": 47.6,
    "lon": -122.3
  }
}
```
2. Necessary Attributes for Mapping
The script includes the following metadata to make your map overlay informative:

### GeoJSON Key	Source (NetCDF Attribute)

**Purpose for Leaflet Map**

`aod Aerosol_Optical_Depth_550 value`
	The primary value to control the visualization (color, size, intensity). Higher AOD means more aerosols/pollution.

`lat`, `lon`
	Coordinates	Used to display data in pop-up tooltips for precise location.

`metadata.time_start` `time_coverage_start`
Helps label the map (e.g., "Air Quality: Spring 2025 Average").

`metadata.variable_description` Variable metadata
Provides context for users viewing the map legend.

To use this with Leaflet, you'd typically load the GeoJSON file and use the aod value within a styling function to render a colored circle marker for each data point.

#### üåç Leaflet Map Overlay: GeoJSON Data Guide (PACE OCI Aerosols)

This guide explains the structure and key fields within the `seattle_aod_data.geojson` file, which is generated by the `nc_to_geojson.py` script for use as a map overlay.

***

1. GeoJSON Structure Overview

The file follows the standard GeoJSON **FeatureCollection** format, optimized for displaying point data (like the center of a grid cell) on a map.

| GeoJSON Section | Content | Purpose |
| :--- | :--- | :--- |
| **`type`** | `"FeatureCollection"` | The top-level container for all features. |
| **`metadata`** | Product name, time, and variable description. | Provides context for map legends and titles (e.g., "Monthly Average from 2025-06-01"). |
| **`features`** | An array of individual geographic data points (`Feature` objects). | Each object represents one 0.1-degree grid cell with valid aerosol data over the Puget Sound area. |

***

2. Key Data Fields for Map Visualization

Every `Feature` object in the GeoJSON array contains a **`geometry`** block for placement and a **`properties`** block for the data value.

  - A. Geometry (Placement)

This block tells Leaflet *where* to draw the data point.

| Field | Value | Meaning |
| :--- | :--- | :--- |
| `geometry.type` | `"Point"` | The feature is a single coordinate. |
| `geometry.coordinates` | `[-122.5, 47.5]` | **REQUIRED:** Standard GeoJSON format is **`[longitude, latitude]`**. |

  - B. Properties (The Data Value)

This is the most crucial block for styling and analysis.

| Field | Source Data | Description | Usage in Leaflet |
| :--- | :--- | :--- | :--- |
| **`aod`** | `Aerosol_Optical_Depth_550` | The **Aerosol Optical Depth (AOD)** value at 550 nm. This is the proxy for total air pollution (particulate matter). | **Primary field for styling.** Use this value to set the color or radius of the map marker. |
| `lat` | Latitude of the point. | Included for convenience and debugging. | Display in **pop-up tooltips**. |
| `lon` | Longitude of the point. | Included for convenience and debugging. | Display in **pop-up tooltips**. |

Example Feature

```json
{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [-122.45, 47.75]  // [lon, lat]
  },
  "properties": {
    "aod": 0.125, // The value to visualize
    "lat": 47.75,
    "lon": -122.45
  }
}
```

3. Interpreting the `aod` Value

The AOD value is a dimensionless measure of how much sunlight is prevented from reaching the ground by aerosols. It's the key to creating a visual hierarchy:

| AOD Range | Pollution Level | Recommended Styling Action |
| :--- | :--- | :--- |
| **$<\mathbf{0.10}$** | Low / Clean Air | Green or light color markers. |
| **$\mathbf{0.10}$ to $\mathbf{0.20}$** | Moderate | Yellow or amber color markers. |
| **$>\mathbf{0.20}$** | High / Smoky or Dusty | Red or dark color markers. **Alert Level.** |

**Leaflet Implementation Note**

When loading the GeoJSON layer, you'll need to define a style function that takes the `aod` value from `feature.properties.aod` and returns a color or radius based on a defined scale (a process called **choroplething** for points).

```javascript
// Example conceptual styling function for Leaflet's L.geoJSON
function getAODColor(aod) {
    return aod > 0.2 ? "#FF0000" : // Red for High AOD
           aod > 0.1 ? "#FFA500" : // Orange/Amber for Moderate AOD
                       "#00FF00"; // Green for Low AOD
}
```
